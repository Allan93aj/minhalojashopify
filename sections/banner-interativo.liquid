{{ 'component-banner-interativo.css' | asset_url | stylesheet_tag }}

<section class="main-banner section-{{ section.id }}">
  <ul class="banner-list">
    <div class="banner-items">
      {% for block in section.blocks %}
        <li data-index="{{ forloop.index }}">{{ block.settings.card_title }}</li>
      {% endfor %}
    </div>
    <div class="banner-title">
      <h1>{{ section.settings.banner_title }}</h1>
    </div>
  </ul>

  <div class="cards-container">
    {% for block in section.blocks %}
      <div
        class="cards-expanding"
        data-index="{{ forloop.index }}"
        style="background-image: url('{{ block.settings.background_image | image_url }}');"
      >
        <div class="wrapper-cards-expanding">
          {% if block.settings.overlay_image != blank %}
            <img src="{{ block.settings.overlay_image | image_url }}" alt="{{ block.settings.card_title }}">
          {% endif %}
          
          <div class="wrapper-number-and-name">
            <p class="card-number">{{ block.settings.card_number }}</p>
            <span class="card-title">{{ block.settings.card_title }}</span>
          </div>
          
          <div class="content-cards-expanding">
            <div class="inner-content-cards-expanding">
              {% if block.settings.inner_image != blank %}
                <div class="img-cards-expanding">
                  <img src="{{ block.settings.inner_image | image_url }}" alt="{{ block.settings.card_title }}">
                </div>
              {% endif %}
              
              {% if block.settings.content_title != blank %}
                <h3 class="content-title">{{ block.settings.content_title }}</h3>
              {% endif %}
              
              {% if block.settings.content_description != blank %}
                <p class="content-description">{{ block.settings.content_description }}</p>
              {% endif %}
              
              {% if block.settings.button_text != blank and block.settings.button_link != blank %}
                <a href="{{ block.settings.button_link }}" class="content-button">
                  {{ block.settings.button_text }}
                </a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const cards = document.querySelectorAll('.section-{{ section.id }} .cards-expanding');
  const listItems = document.querySelectorAll('.section-{{ section.id }} .banner-list li');
  const bannerTitle = document.querySelector('.section-{{ section.id }} .banner-title');

  cards.forEach((card) => {
    card.addEventListener('mouseenter', () => {
      const index = card.getAttribute('data-index');
      listItems.forEach((li) => {
        li.classList.toggle('active', li.getAttribute('data-index') === index);
      });
      if (bannerTitle) bannerTitle.classList.add('hidden');
    });

    card.addEventListener('mouseleave', () => {
      listItems.forEach((li) => li.classList.remove('active'));
      if (bannerTitle) bannerTitle.classList.remove('hidden');
    });
  });
});
</script>

{% schema %}
{
  "name": "Banner Interativo",
  "tag": "section",
  "class": "section-interactive-banner",
  "settings": [
    {
      "type": "text",
      "id": "banner_title",
      "label": "Título principal do banner",
      "default": "Muito mais do que café. Um lugar de momentos"
    }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card Interativo",
      "settings": [
        {
          "type": "text",
          "id": "card_number",
          "label": "Número do card",
          "default": "01"
        },
        {
          "type": "text",
          "id": "card_title",
          "label": "Título do card",
          "default": "Café"
        },
        {
          "type": "image_picker",
          "id": "background_image",
          "label": "Imagem de fundo"
        },
        {
          "type": "image_picker",
          "id": "overlay_image",
          "label": "Imagem de sobreposição (frente do card)"
        },
        {
          "type": "image_picker",
          "id": "inner_image",
          "label": "Imagem interna (ao abrir o card)"
        },
        {
          "type": "text",
          "id": "content_title",
          "label": "Título do conteúdo expandido",
          "default": "Relax"
        },
        {
          "type": "textarea",
          "id": "content_description",
          "label": "Descrição do conteúdo expandido",
          "default": "O silêncio acolhedor que te faz esquecer do tempo"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Texto do botão",
          "default": "encontre seu refúgio"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Link do botão"
        }
      ]
    }
  ],
  "max_blocks": 7,
  "presets": [
    {
      "name": "Banner Interativo",
      "category": "Banners"
    }
  ]
}
{% endschema %}