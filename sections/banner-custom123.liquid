{% comment %}
  Interactive Banner Section - Dinâmico
  Baseado no layout fornecido
{% endcomment %}

<section class="main-banner section-{{ section.id }}">
  <ul class="banner-list">
    <div class="banner-items">
      {% for block in section.blocks %}
        <li data-index="{{ forloop.index }}">{{ block.settings.card_title }}</li>
      {% endfor %}
    </div>
    <div class="banner-title">
      <h1>{{ section.settings.banner_title }}</h1>
    </div>
  </ul>

  <div class="cards-container">
    {% for block in section.blocks %}
      <div
        class="cards-expanding"
        data-index="{{ forloop.index }}"
        style="--bg:url('{{ block.settings.background_image | image_url }}')"
      >
        <div class="wrapper-cards-expanding">
          {% if block.settings.overlay_image != blank %}
            <img src="{{ block.settings.overlay_image | image_url }}" alt="{{ block.settings.card_title }}">
          {% endif %}
          <div class="wrapper-number-and-name">
            <p class="card-number">{{ block.settings.card_number }}</p>
            <span class="card-title">{{ block.settings.card_title }}</span>
          </div>
          <div class="content-cards-expanding">
            <div class="inner-content-cards-expanding">
              <div class="btn-cards-expanding">
                <a href="{{ block.settings.button_link }}" class="btn-banner">{{ block.settings.button_text }}</a>
              </div>
              <div class="img-cards-expanding">
                {% if block.settings.inner_image != blank %}
                  <img src="{{ block.settings.inner_image | image_url }}" alt="{{ block.settings.card_title }}">
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</section>

<style>
.main-banner {
  position: relative;
  width: 100%;
  height: 100vh;
  display: flex;
  overflow: hidden;
  background: #442D17;
}

/* ===== UL LISTA ===== */
.banner-list {
  position: absolute;
  top: 115px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 15px;
  list-style: none;
  z-index: 10;
  max-width: 1200px;
  padding: 0;
  text-align: center;
  flex-direction: column;
}

.banner-items {
  display: flex;
  background: #001C1F;
  border-radius: 100px;
}

.banner-title h1 {
  color: #fff;
  margin: 0;
}

.banner-title {
  opacity: 1;
  transition: opacity 0.4s ease;
}

.banner-title.hidden {
  opacity: 0;
  pointer-events: none;
}

.banner-list li {
  background: #022D2F;
  color: white;
  padding: 12px 20px;
  border-radius: 30px;
  transition: all 0.4s ease, transform 0.3s ease;
  cursor: pointer;
  font-family: sans-serif;
  font-weight: 500;
  transform-origin: center;
  width: 170px;
  margin: 12px;
}

.banner-list li.active {
  background: #fff;
  color: #442D17;
  transform: scale(1.3);
  box-shadow: 0 0 20px rgba(255,255,255,0.3);
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const cards = document.querySelectorAll('.section-{{ section.id }} .cards-expanding');
  const listItems = document.querySelectorAll('.section-{{ section.id }} .banner-list li');
  const bannerTitle = document.querySelector('.section-{{ section.id }} .banner-title');

  cards.forEach((card) => {
    card.addEventListener('mouseenter', () => {
      const index = card.getAttribute('data-index');
      listItems.forEach((li) => {
        li.classList.toggle('active', li.getAttribute('data-index') === index);
      });
      if (bannerTitle) bannerTitle.classList.add('hidden');
    });

    card.addEventListener('mouseleave', () => {
      listItems.forEach((li) => li.classList.remove('active'));
      if (bannerTitle) bannerTitle.classList.remove('hidden');
    });
  });
});
</script>

{% schema %}
{
  "name": "Banner Interativo",
  "tag": "section",
  "class": "section-interactive-banner",
  "settings": [
    {
      "type": "text",
      "id": "banner_title",
      "label": "Título principal do banner",
      "default": "Muito mais do que café. Um lugar de momentos"
    }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card Interativo",
      "settings": [
        {
          "type": "text",
          "id": "card_number",
          "label": "Número do card",
          "default": "01"
        },
        {
          "type": "text",
          "id": "card_title",
          "label": "Título do card",
          "default": "Café"
        },
        {
          "type": "image_picker",
          "id": "background_image",
          "label": "Imagem de fundo"
        },
        {
          "type": "image_picker",
          "id": "overlay_image",
          "label": "Imagem de sobreposição (frente do card)"
        },
        {
          "type": "image_picker",
          "id": "inner_image",
          "label": "Imagem interna (ao abrir o card)"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Texto do botão",
          "default": "Ver mais"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Link do botão"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Banner Interativo",
      "category": "Banners"
    }
  ]
}
{% endschema %}
